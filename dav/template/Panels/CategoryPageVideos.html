<script type="text/javascript">
$(document).ready(function(){
/* Play-Stop trigger button functionality */
	$('.ProductList').on('click', '.videoDemoBtn', function () {
	    if ($(this).hasClass('videoPlaying')) {
	        $(this).removeClass('videoPlaying');
	        $(this).parent().find('div.categoryDemoVideo').remove();
	        }
	        else {
	            var productNumber = $(this).parent().find('div.ProductImage').attr('data-product');
					videoTagCode = '<div class="categoryDemoVideo">'+
										'<video id="demoVideo" class="video" preload autoplay loop autobuffer muted controls width="100%" height="100%" poster="/content/videos/'+productNumber+'.jpg">'+
			                				'<source src="/content/videos/'+productNumber+'.mp4">'+
			                				'<source src="/content/videos/'+productNumber+'.ogv" type="video/ogg">'+
			                				'<p>Your browser does not support this video.  Please upgrade your browser!</p>'+
				                		'</video>'+
				                	'</div>';
	            $(this).addClass('videoPlaying');
	            $(this).parent().find('.ProductImage').append(videoTagCode);
	                    }
	            });
/* Visit each product page and check for video options tag, and if tag exists, add a Play/Stop tirgger button */
	$(".Options").each(function checkForVideo(url) {
		var ProductCatOpt = $(this);
			productNumber = $(this).parent().parent().find('div.ProductImage').attr('data-product');
		function ajax1() {
		    return $.ajax({
			            url: '/content/videos/'+productNumber+'.mp4',
			            type: 'HEAD',
			    }).done(function() { 
			        ProductCatOpt.addClass('withVideo');
			    }).fail(function() { 
			    	return;
			    });
		}
		$.when(ajax1()).done(function(a1){
	        ProductCatOpt.closest('li').append('<span class="videoDemoBtn"><div class="triangle"></div></span>');
        });
    });
});
</script>