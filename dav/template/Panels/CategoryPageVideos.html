<script type="text/javascript">
//Category Page Demo Videos 
        $('<style type="text/css">\
        /* Category Product List Video */\
        .SearchContainer .ProductList li {\
            overflow: visible;\
            /*width: 310px;*/\
            width: 33%;\
        }\
        .categoryDemoVideo {\
            position: absolute;\
            top: 0;\
            left: 0;\
            right: 0;\
            bottom: 0;\
            height: 100%;\
            background-color: #fff;\
        }\
        .categoryDemoVideo video {\
            height: 100%;\
            width: 100%;\
        }\
        .categoryDemoVideo video::-webkit-media-controls {\
            width: 100%;\
        }\
        .Rating.Rating0 {\
            display: none !important;\
        }\
        .videoDemoBtn {\
            width: 36px;\
            height: 36px;\
            position: absolute;\
            cursor: pointer;\
            z-index: 90;\
            display: block;\
            background-color: #39B54A;\
            background-color: #6ADA78;\
            top:0;\
            right:0;\
        }\
        .videoDemoBtn.videoPlaying {\
            background-color: #e53b2c;\
        }\
        .videoDemoBtn .triangle {\
            width: 0px;\
            height: 0px;\
            left: 13px;\
            top: 6px;\
            position: absolute;\
            border-top: 6px solid transparent;\
            border-bottom: 7px solid transparent;\
            border-left: 12px solid #fff;\
            z-index: 1;\
            border-radius: 2px;\
            color: #fff;\
        }\
        .videoDemoBtn .triangle:after {\
            content: "DEMO";\
            position: absolute;\
            text-transform: uppercase;\
            left: -17px;\
            top: 9px;\
            font-size: 8px;\
        }\
        .videoDemoBtn.videoPlaying .triangle {\
            border: 6px solid #fff;\
            left: 12px;\
        }\
        .videoDemoBtn.videoPlaying .triangle:after {\
            left: -10px;\
        }\
        </style>')
            .appendTo('head');
            
    function showProductListDemoVideos() {
        /* Play-Stop trigger button functionality */
        $('.ProductList').on('click', '.videoDemoBtn', function() {
            if ($(this).hasClass('videoPlaying')) {
                $(this).removeClass('videoPlaying');
                $(this).parent().find('.categoryDemoVideo').remove();
            } else {
                $('.ProductList .videoDemoBtn.videoPlaying').each(function(){
	                $(this).click();
	            });
            	var productNumber = $(this).parent().find('.ProductCompareButton .CheckBox').attr('value');
                var videoTagCode = '<div class="categoryDemoVideo">' +
                    '<video id="demoVideo" class="video" poster="/content/images/dankstop-loading-running-cat-wbg3.gif" preload autoplay loop autobuffer muted controls width="100%" height="100%" >' +
                    '<source src="/content/videos/' + productNumber + '.mp4" type="video/mp4">' +
                    '<source src="/content/videos/' + productNumber + '.ogv" type="video/ogg">' +
                    '<p>Your browser does not support this video.  Please upgrade your browser!</p>' +
                    '</video>' +
                    '</div>';
                $(this).addClass('videoPlaying');
                $(this).parent().find('.ProductImage').append(videoTagCode);
				var video = document.getElementById('demoVideo');
				video.play();
            }
        });
        /* Visit each product page and check for video options tag, and if tag exists, add a Play/Stop tirgger button */
        $('.ProductCompareButton .CheckBox').each(function checkForVideo(url) {
            var $thisProductListingItem = $(this).closest('li');
            var fadingPlayBtn = $('<span class="videoDemoBtn"><div class="triangle"></div></span>').hide().fadeIn(700);
            var productNumber = $(this).attr('value');
            var ProductCatOpt = $(this).parents().eq(3).find('.ProductActionAdd a');
    
            function ajax1() {
                return $.ajax({
                    url: '//dankstop.com/content/videos/' + productNumber + '.mp4',
                    type: 'HEAD',
                }).done(function() {
                    ProductCatOpt.addClass('withVideo');
                });
            }
            $.when(ajax1()).done(function(a1) {
                $thisProductListingItem.append(fadingPlayBtn);
            });
        });
    };
        
    $(window).load(function() {
        showProductListDemoVideos();
    });
</script>